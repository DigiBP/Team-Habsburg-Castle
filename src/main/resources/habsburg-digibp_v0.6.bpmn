<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_15eheul" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.2.0">
  <bpmn:collaboration id="Collaboration_0mp3sig">
    <bpmn:participant id="Participant_117sccv" name="Pharmacy" processRef="team_habsburg_4" />
  </bpmn:collaboration>
  <bpmn:process id="team_habsburg_4" isExecutable="true">
    <bpmn:laneSet id="LaneSet_1ux4vo5">
      <bpmn:lane id="Lane_1ogusqd" name="Assistant">
        <bpmn:flowNodeRef>Gateway_1qkdom8</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0cq0f2q</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>PharmacyBot</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1asig2f</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1hf2grb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1c3t2y7</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1n5j5u0</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1ajw4ec</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_002rqdr</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0dyrktn</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_17ifqmz</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1gvaayt</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0xzp543</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_0r2oit9" name="Pharmacist">
        <bpmn:flowNodeRef>Activity_1ma7sux</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_15n3ex1</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0tqwohl</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_14l32iy</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0zwffnq</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0mow97z</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_0zbbwzq</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_14a38fp</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0rz68uo</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_1h6hu2r</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_12hp2tf</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1gz848z</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1cxbbsa</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_0uc8qqv</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:exclusiveGateway id="Gateway_1qkdom8">
      <bpmn:incoming>Flow_0q4dyd1</bpmn:incoming>
      <bpmn:incoming>Flow_1esatol</bpmn:incoming>
      <bpmn:outgoing>Flow_0drodtl</bpmn:outgoing>
      <bpmn:outgoing>Flow_0p2y7i7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_0cq0f2q" name="Call API">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="url">https://hook.integromat.com/hovkjvtudpjxk3yds15moy5vx1u90bjh</camunda:inputParameter>
            <camunda:inputParameter name="method">GET</camunda:inputParameter>
            <camunda:outputParameter name="prescription_array">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
prescription_array=object.prescription</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0drodtl</bpmn:incoming>
      <bpmn:outgoing>Flow_0advbva</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_1ma7sux" name="Assess order">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="productName" label="Product Name" type="string" defaultValue="${productName}" />
          <camunda:formField id="productAmount" label="Amount" type="long" defaultValue="${productAmount}" />
          <camunda:formField id="amountType" label="Type" type="string" defaultValue="${amountType}" />
          <camunda:formField id="deliveryDate" label="Delivery Date" type="string" defaultValue="${deliveryDate}" />
          <camunda:formField id="customerName" label="Customer Name" type="string" defaultValue="${customerName}" />
          <camunda:formField id="customerType" label="Customer Type" type="string" defaultValue="${customerType}" />
          <camunda:formField id="substancesLegal" label="Substances declared as legal by swissmedic?" type="boolean" />
          <camunda:formField id="substancesInStock" label="Substances in stock?" type="boolean" />
          <camunda:formField id="substancesAvailable" label="If no: Substances available and ordered?" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0advbva</bpmn:incoming>
      <bpmn:incoming>Flow_0p2y7i7</bpmn:incoming>
      <bpmn:outgoing>Flow_1ft0wiw</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_15n3ex1" name="Manufacturable ?">
      <bpmn:incoming>Flow_1cvufqw</bpmn:incoming>
      <bpmn:outgoing>Flow_0d15h1d</bpmn:outgoing>
      <bpmn:outgoing>Flow_1a5lqeo</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_0tqwohl" name="Compose message to client">
      <bpmn:incoming>Flow_0d15h1d</bpmn:incoming>
      <bpmn:outgoing>Flow_1y9m5t7</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="PharmacyBot">
      <bpmn:outgoing>Flow_1pjqnso</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="Activity_1asig2f" name="Add rubrik &#34;A&#34;">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="productName" label="Product" type="string" />
          <camunda:formField id="productAmount" label="Amount" type="long" />
          <camunda:formField id="amountType" label="AmountType" type="string" />
          <camunda:formField id="deliveryDate" label="Delivery Date" type="date" />
          <camunda:formField id="customerName" label="Customer" type="string" />
          <camunda:formField id="customerPhone" label="Phone (optional)" type="string" />
          <camunda:formField id="customerEmail" label="Email (optional)" type="string" />
          <camunda:formField id="deliveryMethod" label="Delivery Method" type="enum">
            <camunda:value id="pickUp" name="Pick Up" />
            <camunda:value id="personalDelivery" name="Delivery" />
            <camunda:value id="internalStorage" name="Internal" />
            <camunda:value id="sendDelivery" name="Send by Voigt" />
          </camunda:formField>
          <camunda:formField id="paymentMethod" label="Payment Method" type="enum">
            <camunda:value id="billPayment" name="Bill" />
            <camunda:value id="advancePayment" name="Advance" />
            <camunda:value id="insurancePayment" name="Insurance" />
          </camunda:formField>
          <camunda:formField id="customerType" label="Customer Type" type="enum">
            <camunda:value id="customerprescription" name="Prescription" />
            <camunda:value id="customerPharmacy" name="Pharmacy" />
            <camunda:value id="customerStorage" name="Storage" />
            <camunda:value id="customerPhysician" name="Physician" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1rqp9pf</bpmn:incoming>
      <bpmn:outgoing>Flow_0q4dyd1</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_1hf2grb" name="OrderType?">
      <bpmn:incoming>Flow_08i642h</bpmn:incoming>
      <bpmn:outgoing>Flow_1rqp9pf</bpmn:outgoing>
      <bpmn:outgoing>Flow_0ihn27h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_1c3t2y7" name="Define OrderType">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="orderType" label="OrderType" type="enum">
            <camunda:value id="Traditional" name="Traditional" />
            <camunda:value id="PharmacyBot" name="PharmacyBot" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1pjqnso</bpmn:incoming>
      <bpmn:outgoing>Flow_08i642h</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Activity_1n5j5u0" name="Check pharmacyBot">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">GET</camunda:inputParameter>
            <camunda:inputParameter name="url">https://hook.integromat.com/6htvyvyz0qsh09fo8qw9b0j51elbbbvh</camunda:inputParameter>
            <camunda:outputParameter name="customerType">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
customerType=object.customerType</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="productName">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
productName=object.productName</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="deliveryDate">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
deliveryDate=object.deliveryDate</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="customerName">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
customerName=object.customerName</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="customerEmail">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
customerEmail=object.customerEmail</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="deliveryMethod">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
deliveryMethod=object.deliveryMethod</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="paymentMethod">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
paymentMethod=object.paymentMethod</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="amountType">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
amountType=object.amountType</camunda:script>
            </camunda:outputParameter>
            <camunda:outputParameter name="productAmount">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
productAmount=object.productAmount</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0ihn27h</bpmn:incoming>
      <bpmn:outgoing>Flow_1esatol</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0drodtl" sourceRef="Gateway_1qkdom8" targetRef="Activity_0cq0f2q">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${customerType=="customerPrescription"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0p2y7i7" sourceRef="Gateway_1qkdom8" targetRef="Activity_1ma7sux">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${customerType!="customerPrescription"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0advbva" sourceRef="Activity_0cq0f2q" targetRef="Activity_1ma7sux" />
    <bpmn:sequenceFlow id="Flow_04yiuf7" sourceRef="Gateway_1ajw4ec" targetRef="Activity_14a38fp" />
    <bpmn:sequenceFlow id="Flow_1j3674h" sourceRef="Gateway_1h6hu2r" targetRef="Activity_0dyrktn" />
    <bpmn:sequenceFlow id="Flow_1ft0wiw" sourceRef="Activity_1ma7sux" targetRef="Activity_14l32iy" />
    <bpmn:sequenceFlow id="Flow_1cvufqw" sourceRef="Activity_14l32iy" targetRef="Gateway_15n3ex1" />
    <bpmn:sequenceFlow id="Flow_0d15h1d" name="No" sourceRef="Gateway_15n3ex1" targetRef="Activity_0tqwohl">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Manufacturable==false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1y9m5t7" sourceRef="Activity_0tqwohl" targetRef="Event_0zwffnq" />
    <bpmn:sequenceFlow id="Flow_0ihn27h" name="PharmacyBot" sourceRef="Gateway_1hf2grb" targetRef="Activity_1n5j5u0">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${orderType=="PharmacyBot"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1pjqnso" sourceRef="PharmacyBot" targetRef="Activity_1c3t2y7" />
    <bpmn:sequenceFlow id="Flow_1rqp9pf" name="Traditional" sourceRef="Gateway_1hf2grb" targetRef="Activity_1asig2f">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${orderType=="Traditional"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_08i642h" sourceRef="Activity_1c3t2y7" targetRef="Gateway_1hf2grb" />
    <bpmn:sequenceFlow id="Flow_1esatol" sourceRef="Activity_1n5j5u0" targetRef="Gateway_1qkdom8" />
    <bpmn:sequenceFlow id="Flow_0q4dyd1" sourceRef="Activity_1asig2f" targetRef="Gateway_1qkdom8" />
    <bpmn:businessRuleTask id="Activity_14l32iy" name="Decide on manufactorability" camunda:resultVariable="Manuf" camunda:decisionRef="DecisionTable" camunda:mapDecisionResult="singleResult">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:outputParameter name="Manufacturable">
            <camunda:script scriptFormat="JavaScript">Boolean(Manuf.Manufacturable)</camunda:script>
          </camunda:outputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1ft0wiw</bpmn:incoming>
      <bpmn:outgoing>Flow_1cvufqw</bpmn:outgoing>
    </bpmn:businessRuleTask>
    <bpmn:sequenceFlow id="Flow_1a5lqeo" name="Yes" sourceRef="Gateway_15n3ex1" targetRef="Activity_0mow97z">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Manufacturable==true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_02q4jy2" sourceRef="Activity_0mow97z" targetRef="Activity_0rz68uo" />
    <bpmn:sequenceFlow id="Flow_1mmhkaw" sourceRef="Activity_0uc8qqv" targetRef="Gateway_12hp2tf" />
    <bpmn:endEvent id="Event_0zwffnq" name="Order cancelled">
      <bpmn:incoming>Flow_1y9m5t7</bpmn:incoming>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1l7gn9n" />
    </bpmn:endEvent>
    <bpmn:userTask id="Activity_0mow97z" name="Calculate AMBV risk value">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="galenicalForm" label="Galenical form" type="enum">
            <camunda:value id="parenteralia" name="Parenteralia" />
            <camunda:value id="ophtaUnharmed" name="Ophthalmologic on the unharmed eye" />
            <camunda:value id="inhalative" name="Inhalatives" />
            <camunda:value id="enteralOrTopicalSterile" name="Enteral or topical (sterile)" />
            <camunda:value id="ophthaHarmed" name="Ophthalmologic on the harmed eye" />
            <camunda:value id="topic" name="Application on Skin" />
            <camunda:value id="enteral" name="Enteral" />
          </camunda:formField>
          <camunda:formField id="riskOfSubstance" label="Risk of Substance" type="enum">
            <camunda:properties>
              <camunda:property id="highRisk" value="5" />
            </camunda:properties>
            <camunda:value id="highRisk" name="High" />
            <camunda:value id="mediumRisk" name="Medium" />
            <camunda:value id="lowRisk" name="Low" />
          </camunda:formField>
          <camunda:formField id="ratioContract" label="Ratio of contract manufacturing" type="enum">
            <camunda:value id="onlyContract" name="Exclusively contract order" />
            <camunda:value id="mainlyContract" name="Mainly contract order (2:1)" />
            <camunda:value id="evenContract" name="Balanced contract order (1:1)" />
            <camunda:value id="mainlyOwn" name="Mainly for own clientele (1:2)" />
            <camunda:value id="onlyOwn" name="Exclusively for own clientele" />
          </camunda:formField>
          <camunda:formField id="manufactoringProcess" label="Manufactoring Process" type="enum">
            <camunda:value id="aseptic" name="Aseptic" />
            <camunda:value id="asepticSterilization" name="Aseptic with sterilization" />
            <camunda:value id="solveMix" name="Solve and mix" />
            <camunda:value id="dilute" name="Dilute" />
            <camunda:value id="bottling" name="Bottling of of non-sterile compounds " />
          </camunda:formField>
          <camunda:formField id="amountPerYear" label="Amount of produced doses per year" type="long" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1a5lqeo</bpmn:incoming>
      <bpmn:outgoing>Flow_02q4jy2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_0zbbwzq" name="Order fullfilled">
      <bpmn:incoming>Flow_15z7bt2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="Activity_14a38fp" name="Finish documentation">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="finishDocumentation" label="Documentation finished?" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04yiuf7</bpmn:incoming>
      <bpmn:outgoing>Flow_15z7bt2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_15z7bt2" sourceRef="Activity_14a38fp" targetRef="Event_0zbbwzq" />
    <bpmn:serviceTask id="Activity_0rz68uo" name="POST AMBV details">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">POST</camunda:inputParameter>
            <camunda:inputParameter name="url">https://hook.integromat.com/xizq35yoqvqnvv5ssh6yuc31wof3ac08</camunda:inputParameter>
            <camunda:inputParameter name="headers">
              <camunda:map>
                <camunda:entry key="Content-Type">application/json</camunda:entry>
              </camunda:map>
            </camunda:inputParameter>
            <camunda:inputParameter name="payload">
              <camunda:script scriptFormat="JavaScript">out = JSON.stringify({
    "galenicalForm": galenicalForm,
    "riskOfSubstance": riskOfSubstance,
    "ratioContract": ratioContract,
    "manufactoringProcess": manufactoringProcess,
    "amountPerYear": amountPerYear
});</camunda:script>
            </camunda:inputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_02q4jy2</bpmn:incoming>
      <bpmn:outgoing>Flow_0hgq6tr</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0hgq6tr" sourceRef="Activity_0rz68uo" targetRef="Activity_0uc8qqv" />
    <bpmn:exclusiveGateway id="Gateway_1ajw4ec">
      <bpmn:incoming>Flow_0emk6dd</bpmn:incoming>
      <bpmn:incoming>Flow_09goswi</bpmn:incoming>
      <bpmn:incoming>Flow_13kga3n</bpmn:incoming>
      <bpmn:outgoing>Flow_04yiuf7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_002rqdr" name="Order type?">
      <bpmn:incoming>Flow_0l2o6v9</bpmn:incoming>
      <bpmn:outgoing>Flow_0sxzlio</bpmn:outgoing>
      <bpmn:outgoing>Flow_0sg50h2</bpmn:outgoing>
      <bpmn:outgoing>Flow_0r882g7</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_0dyrktn" name="Complete billing">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="Send_type" label="sendType" type="enum">
            <camunda:value id="externalOrderType" name="External order Type" />
            <camunda:value id="pickUp" name="Pick up by Customer" />
            <camunda:value id="internalStorage" name="Store product" />
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1j3674h</bpmn:incoming>
      <bpmn:outgoing>Flow_0l2o6v9</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:manualTask id="Activity_17ifqmz" name="Send product">
      <bpmn:incoming>Flow_0sxzlio</bpmn:incoming>
      <bpmn:outgoing>Flow_09goswi</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:userTask id="Activity_1gvaayt" name="Inform customer">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="informingCustomer" label="Customer informed?" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0sg50h2</bpmn:incoming>
      <bpmn:outgoing>Flow_13kga3n</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:manualTask id="Activity_0xzp543" name="Store product">
      <bpmn:incoming>Flow_0r882g7</bpmn:incoming>
      <bpmn:outgoing>Flow_0emk6dd</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:sequenceFlow id="Flow_09goswi" sourceRef="Activity_17ifqmz" targetRef="Gateway_1ajw4ec" />
    <bpmn:sequenceFlow id="Flow_13kga3n" sourceRef="Activity_1gvaayt" targetRef="Gateway_1ajw4ec" />
    <bpmn:sequenceFlow id="Flow_0emk6dd" sourceRef="Activity_0xzp543" targetRef="Gateway_1ajw4ec" />
    <bpmn:sequenceFlow id="Flow_0l2o6v9" sourceRef="Activity_0dyrktn" targetRef="Gateway_002rqdr" />
    <bpmn:sequenceFlow id="Flow_0sxzlio" name="External order type" sourceRef="Gateway_002rqdr" targetRef="Activity_17ifqmz">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Send_type=="externalOrderType"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0sg50h2" name="Pick up" sourceRef="Gateway_002rqdr" targetRef="Activity_1gvaayt">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Send_type=="pickUp"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0r882g7" name="Internal storage" sourceRef="Gateway_002rqdr" targetRef="Activity_0xzp543">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${Send_type=="internalStorage"}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:exclusiveGateway id="Gateway_1h6hu2r">
      <bpmn:incoming>Flow_1pmjj37</bpmn:incoming>
      <bpmn:incoming>Flow_0ca0h9t</bpmn:incoming>
      <bpmn:outgoing>Flow_1j3674h</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_12hp2tf" name="AMBV value?">
      <bpmn:incoming>Flow_1mmhkaw</bpmn:incoming>
      <bpmn:outgoing>Flow_0uyk8r3</bpmn:outgoing>
      <bpmn:outgoing>Flow_17m63zk</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="Activity_1gz848z" name="Produce in pharmacy laboratory">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="checklist_pharmacylab" label="Complete?" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0uyk8r3</bpmn:incoming>
      <bpmn:outgoing>Flow_0ca0h9t</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Activity_1cxbbsa" name="Produce in clean room laboratory">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="checklist_cleanLab" label="Complete?" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_17m63zk</bpmn:incoming>
      <bpmn:outgoing>Flow_1pmjj37</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_0ca0h9t" sourceRef="Activity_1gz848z" targetRef="Gateway_1h6hu2r" />
    <bpmn:sequenceFlow id="Flow_1pmjj37" sourceRef="Activity_1cxbbsa" targetRef="Gateway_1h6hu2r" />
    <bpmn:sequenceFlow id="Flow_0uyk8r3" name="&#60; 100" sourceRef="Gateway_12hp2tf" targetRef="Activity_1gz848z">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${AMBVriskValue&lt;100}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_17m63zk" name="&#62;= 100" sourceRef="Gateway_12hp2tf" targetRef="Activity_1cxbbsa">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${AMBVriskValue&gt;=100}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:serviceTask id="Activity_0uc8qqv" name="Provide AMBV details">
      <bpmn:extensionElements>
        <camunda:connector>
          <camunda:inputOutput>
            <camunda:inputParameter name="method">GET</camunda:inputParameter>
            <camunda:inputParameter name="url">https://hook.integromat.com/xizq35yoqvqnvv5ssh6yuc31wof3ac08</camunda:inputParameter>
            <camunda:outputParameter name="AMBVriskValue">
              <camunda:script scriptFormat="JavaScript">object=JSON.parse(response);
AMBVriskValue=object.AmbvRiskValue</camunda:script>
            </camunda:outputParameter>
          </camunda:inputOutput>
          <camunda:connectorId>http-connector</camunda:connectorId>
        </camunda:connector>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0hgq6tr</bpmn:incoming>
      <bpmn:outgoing>Flow_1mmhkaw</bpmn:outgoing>
    </bpmn:serviceTask>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0mp3sig">
      <bpmndi:BPMNShape id="Participant_117sccv_di" bpmnElement="Participant_117sccv" isHorizontal="true">
        <dc:Bounds x="152" y="80" width="2978" height="800" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0r2oit9_di" bpmnElement="Lane_0r2oit9" isHorizontal="true">
        <dc:Bounds x="182" y="80" width="2948" height="375" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_1ogusqd_di" bpmnElement="Lane_1ogusqd" isHorizontal="true">
        <dc:Bounds x="182" y="455" width="2948" height="425" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_17m63zk_di" bpmnElement="Flow_17m63zk">
        <di:waypoint x="2040" y="265" />
        <di:waypoint x="2040" y="320" />
        <di:waypoint x="2130" y="320" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2038" y="290" width="35" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uyk8r3_di" bpmnElement="Flow_0uyk8r3">
        <di:waypoint x="2040" y="215" />
        <di:waypoint x="2040" y="150" />
        <di:waypoint x="2130" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2041" y="181" width="28" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pmjj37_di" bpmnElement="Flow_1pmjj37">
        <di:waypoint x="2230" y="320" />
        <di:waypoint x="2320" y="320" />
        <di:waypoint x="2320" y="265" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ca0h9t_di" bpmnElement="Flow_0ca0h9t">
        <di:waypoint x="2230" y="150" />
        <di:waypoint x="2320" y="150" />
        <di:waypoint x="2320" y="215" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0r882g7_di" bpmnElement="Flow_0r882g7">
        <di:waypoint x="2560" y="725" />
        <di:waypoint x="2560" y="820" />
        <di:waypoint x="2670" y="820" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2584" y="823" width="77" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sg50h2_di" bpmnElement="Flow_0sg50h2">
        <di:waypoint x="2585" y="700" />
        <di:waypoint x="2670" y="700" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2614" y="703" width="37" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sxzlio_di" bpmnElement="Flow_0sxzlio">
        <di:waypoint x="2560" y="675" />
        <di:waypoint x="2560" y="570" />
        <di:waypoint x="2670" y="570" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2588" y="576" width="71" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l2o6v9_di" bpmnElement="Flow_0l2o6v9">
        <di:waypoint x="2490" y="700" />
        <di:waypoint x="2535" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0emk6dd_di" bpmnElement="Flow_0emk6dd">
        <di:waypoint x="2770" y="820" />
        <di:waypoint x="2870" y="820" />
        <di:waypoint x="2870" y="725" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13kga3n_di" bpmnElement="Flow_13kga3n">
        <di:waypoint x="2770" y="700" />
        <di:waypoint x="2845" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09goswi_di" bpmnElement="Flow_09goswi">
        <di:waypoint x="2770" y="570" />
        <di:waypoint x="2870" y="570" />
        <di:waypoint x="2870" y="675" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0hgq6tr_di" bpmnElement="Flow_0hgq6tr">
        <di:waypoint x="1620" y="240" />
        <di:waypoint x="1760" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15z7bt2_di" bpmnElement="Flow_15z7bt2">
        <di:waypoint x="2980" y="230" />
        <di:waypoint x="3052" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mmhkaw_di" bpmnElement="Flow_1mmhkaw">
        <di:waypoint x="1860" y="240" />
        <di:waypoint x="2015" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02q4jy2_di" bpmnElement="Flow_02q4jy2">
        <di:waypoint x="1460" y="240" />
        <di:waypoint x="1520" y="240" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a5lqeo_di" bpmnElement="Flow_1a5lqeo">
        <di:waypoint x="1270" y="295" />
        <di:waypoint x="1270" y="240" />
        <di:waypoint x="1360" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1311" y="243" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q4dyd1_di" bpmnElement="Flow_0q4dyd1">
        <di:waypoint x="680" y="560" />
        <di:waypoint x="785" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1esatol_di" bpmnElement="Flow_1esatol">
        <di:waypoint x="680" y="690" />
        <di:waypoint x="810" y="690" />
        <di:waypoint x="810" y="585" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08i642h_di" bpmnElement="Flow_08i642h">
        <di:waypoint x="430" y="560" />
        <di:waypoint x="465" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rqp9pf_di" bpmnElement="Flow_1rqp9pf">
        <di:waypoint x="515" y="560" />
        <di:waypoint x="580" y="560" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="515" y="542" width="51" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1pjqnso_di" bpmnElement="Flow_1pjqnso">
        <di:waypoint x="288" y="560" />
        <di:waypoint x="330" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ihn27h_di" bpmnElement="Flow_0ihn27h">
        <di:waypoint x="490" y="585" />
        <di:waypoint x="490" y="690" />
        <di:waypoint x="580" y="690" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="496" y="693" width="67" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1y9m5t7_di" bpmnElement="Flow_1y9m5t7">
        <di:waypoint x="1460" y="380" />
        <di:waypoint x="1552" y="380" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0d15h1d_di" bpmnElement="Flow_0d15h1d">
        <di:waypoint x="1270" y="345" />
        <di:waypoint x="1270" y="380" />
        <di:waypoint x="1360" y="380" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1312" y="358" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1cvufqw_di" bpmnElement="Flow_1cvufqw">
        <di:waypoint x="1160" y="320" />
        <di:waypoint x="1245" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ft0wiw_di" bpmnElement="Flow_1ft0wiw">
        <di:waypoint x="1000" y="320" />
        <di:waypoint x="1060" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1j3674h_di" bpmnElement="Flow_1j3674h">
        <di:waypoint x="2345" y="240" />
        <di:waypoint x="2360" y="240" />
        <di:waypoint x="2360" y="700" />
        <di:waypoint x="2390" y="700" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04yiuf7_di" bpmnElement="Flow_04yiuf7">
        <di:waypoint x="2895" y="700" />
        <di:waypoint x="2930" y="700" />
        <di:waypoint x="2930" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0advbva_di" bpmnElement="Flow_0advbva">
        <di:waypoint x="950" y="520" />
        <di:waypoint x="950" y="360" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0p2y7i7_di" bpmnElement="Flow_0p2y7i7">
        <di:waypoint x="810" y="535" />
        <di:waypoint x="810" y="320" />
        <di:waypoint x="900" y="320" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0drodtl_di" bpmnElement="Flow_0drodtl">
        <di:waypoint x="835" y="560" />
        <di:waypoint x="900" y="560" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Gateway_1qkdom8_di" bpmnElement="Gateway_1qkdom8" isMarkerVisible="true">
        <dc:Bounds x="785" y="535" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0jjsnu4_di" bpmnElement="Activity_0cq0f2q">
        <dc:Bounds x="900" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ma7sux_di" bpmnElement="Activity_1ma7sux">
        <dc:Bounds x="900" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1wu1a9r_di" bpmnElement="Gateway_15n3ex1" isMarkerVisible="true">
        <dc:Bounds x="1245" y="295" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1307" y="313" width="85" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_13rtj6s_di" bpmnElement="Activity_0tqwohl">
        <dc:Bounds x="1360" y="340" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_04km3bn_di" bpmnElement="PharmacyBot">
        <dc:Bounds x="252" y="542" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1asig2f_di" bpmnElement="Activity_1asig2f">
        <dc:Bounds x="580" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1hf2grb_di" bpmnElement="Gateway_1hf2grb" isMarkerVisible="true">
        <dc:Bounds x="465" y="535" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="461" y="505" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1c3t2y7_di" bpmnElement="Activity_1c3t2y7">
        <dc:Bounds x="330" y="520" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1n5j5u0_di" bpmnElement="Activity_1n5j5u0">
        <dc:Bounds x="580" y="650" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_14l32iy_di" bpmnElement="Activity_14l32iy">
        <dc:Bounds x="1060" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1q43ybs_di" bpmnElement="Event_0zwffnq">
        <dc:Bounds x="1552" y="362" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1531" y="405" width="78" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0mow97z_di" bpmnElement="Activity_0mow97z">
        <dc:Bounds x="1360" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0zbbwzq_di" bpmnElement="Event_0zbbwzq">
        <dc:Bounds x="3052" y="212" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3036" y="255" width="68" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0j47hvq_di" bpmnElement="Activity_14a38fp">
        <dc:Bounds x="2880" y="190" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rz68uo_di" bpmnElement="Activity_0rz68uo">
        <dc:Bounds x="1520" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1ajw4ec_di" bpmnElement="Gateway_1ajw4ec" isMarkerVisible="true">
        <dc:Bounds x="2845" y="675" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0axw75q_di" bpmnElement="Gateway_002rqdr" isMarkerVisible="true">
        <dc:Bounds x="2535" y="675" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2500" y="723" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0epkufz_di" bpmnElement="Activity_0dyrktn">
        <dc:Bounds x="2390" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0bqsd95_di" bpmnElement="Activity_17ifqmz">
        <dc:Bounds x="2670" y="530" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08ekdze_di" bpmnElement="Activity_1gvaayt">
        <dc:Bounds x="2670" y="660" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0di4tye_di" bpmnElement="Activity_0xzp543">
        <dc:Bounds x="2670" y="780" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1yzya23_di" bpmnElement="Gateway_1h6hu2r" isMarkerVisible="true">
        <dc:Bounds x="2295" y="215" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1a0q6uz_di" bpmnElement="Gateway_12hp2tf" isMarkerVisible="true">
        <dc:Bounds x="2015" y="215" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2089" y="230" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1puv1ml_di" bpmnElement="Activity_1gz848z">
        <dc:Bounds x="2130" y="110" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0rfpmi7_di" bpmnElement="Activity_1cxbbsa">
        <dc:Bounds x="2130" y="280" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0uc8qqv_di" bpmnElement="Activity_0uc8qqv">
        <dc:Bounds x="1760" y="200" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>